<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prescrizione</title>
    <style>
      body {
        font-family: "Helvetica Neue", Arial, sans-serif;
        margin: 40px;
        color: #000;
        font-size: 20px;
      }

      .header {
        display: flex;
        justify-content: center;
        flex-direction: column;
        gap: 6px;
      }

      .textCenter {
        text-align: center;
      }

      .textEnd {
        text-align: end;
      }

      p {
        margin: 0;
      }

      .sm {
        font-size: 0.8rem;
      }

      .xs {
        font-size: 0.7rem;
      }

      .divider {
        border: 1px solid #828dee;
        width: 100%;
        margin: 15px 0px;
      }

      .mt-1 {
        margin-top: 5px;
      }

      .mt-2 {
        margin-top: 10px;
      }

      .underline {
        text-decoration: underline;
      }

      .semiBold {
        font-weight: 500;
      }

      .details {
        margin-top: 20px;
        display: flex;
        gap: 30px;
        flex-direction: column;
      }

      .mt-4{
        margin-top: 25px;
      }

      .logo {
        margin-top: 70px;
        display: flex;
        justify-content: center;
        font-size: 30px;
        align-items: center;
        gap: 10px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="header">
      <p class="drName textCenter">
        <i>Pediatra</i> <strong>Dott. <%= doctor.name %></strong>
      </p>
      <p class="textCenter sm">
        P.IVA <%= doctor.piva %> - <%= doctor.address %>
      </p>
      <p class="textCenter sm"><%= doctor.phone %> - <%= doctor.email %></p>
    </div>

    <div class="divider"></div>

    <div>
      <p class="textCenter">
        <span class="underline">Paziente</span>: <strong><%= patient.name %></strong>
      </p>
      <p class="textCenter mt-1 sm semiBold">C.F. <%= patient.cf %></p>
      <% if (prescription.repeatable) { %>
        <p class="textEnd sm"><strong>RIPETIBILE</strong></p>
      <% } %>
    </div>

    <div class="details">
      <% if (prescription.medicines?.length > 0) { %>
        <% prescription.medicines.forEach(function(med) { %>
          <div class="mt-4">
            <p><strong><%= med.quantity %> <span class="">X</span> <%= med.name %> -</strong> Conf. <%= med.packageSize %></p>
            <% if (med.posologia) { %>
              <p class="mt-1 sm">
                <span class="underline">Posologia</span>: <%= med.posologia %>
              </p>
            <% } %>
          </div>
        <% }); %>
      <% } %>

      <% if (prescription?.services?.length > 0) { %>
        <% prescription.services.forEach(function(service) { %>
          <div class="mt-4">
            <p><strong><%= service.name %> -</strong> Branca: <%= service.branch %></p>
          </div>
        <% }); %>
      <% } %> 

     <% if (prescription?.labTests?.length > 0) { %>
        <% prescription.labTests.forEach(function(lab) { %>
          <div class="mt-4">
            <p><strong><%= lab.name %> -</strong> Branca: <%= lab.branch %></p>
          </div>
        <% }); %>
      <% } %>

      <% if (prescription.notes) { %>
        <div class="mt-4">
          <p class="sm">Note del pediatra</p>
          <p class="sm mt-2"><%= prescription.notes %></p>
        </div>
      <% } %>

      <div class="logo textCenter ">
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik05LjE0NjM0IDBDNC4wOTQ5NiAwIDAgNC4wOTQ5NiAwIDkuMTQ2MzRWNDAuODUzN0MwIDQ1LjkwNSA0LjA5NDk2IDUwIDkuMTQ2MzQgNTBINDAuODUzN0M0NS45MDUgNTAgNTAgNDUuOTA1IDUwIDQwLjg1MzdWOS4xNDYzNEM1MCA0LjA5NDk2IDQ1LjkwNSAwIDQwLjg1MzcgMEg5LjE0NjM0Wk0yNC4yMTg2IDE1LjEwODhDMjQuMjE4NiAxNC44Nzk2IDI0LjMyMDUgMTQuNjczNiAyNC40ODE4IDE0LjUzMzZMMjQuNDgxNCAxNC41MzI5QzI0Ljk2NDkgMTQuMDY4NCAyNS4yNjE1IDEzLjQxODMgMjUuMjYxNSAxMi42OTQ2QzI1LjI2MTUgMTEuMjc4OSAyNC4xMDQ1IDEwLjEzMTQgMjIuNjc3MSAxMC4xMzE0QzIxLjI0OTggMTAuMTMxNCAyMC4yMTI2IDExLjIzIDIwLjA5MjcgMTIuNjk0NkMyMC4wNDY5IDEzLjI1MDggMjAuMDQ3IDEzLjgxMjcgMjAuMDQ3IDE0LjM3NzFMMjAuMDQ3IDE0LjQyNzNDMjAuMDQ3IDE1LjUzODMgMjAuMTI1NSAxNi42NDczIDIwLjIxMzMgMTcuNzMxNkMyMC4yNjgxIDE4LjQxMDcgMjAuMzIyOCAxOS41MzM1IDIwLjMyMjggMjAuNDU0M0MyMC4zMjI4IDIyLjM2NjYgMjAuMTU2OCAyNC4yNDA3IDE5LjgzODYgMjYuMDYyNkMyMy44MDYxIDI0LjU1NTIgMjcuODcgMjMuMTE2NCAyOC42ODA3IDIyLjgzMjlDMjguNzU4OCAyMi44MDU3IDI4LjgzNzMgMjIuNzc5MyAyOC45MTU4IDIyLjc1MzZDMjkuMDgzOSAyMi42OTgzIDI5LjUwODcgMjIuNTQ0NyAyOS45MTkxIDIyLjI4MTNDMzAuODAzOSAyMS43MTM2IDMxLjEwODkgMjEuMDQyNCAzMS4xNzgzIDIwLjgzMjhDMzEuMjg4OSAyMC40OTkyIDMxLjI4NzUgMjAuMjI0MiAzMS4yODcxIDIwLjEzMjZDMzEuMjg3MSAyMC4xMjc1IDMxLjI4NzEgMjAuMTIzIDMxLjI4NzEgMjAuMTE5MUMzMS4yODcxIDE4Ljc5MzQgMzAuMjAzNSAxNy43MTg3IDI4Ljg2NjggMTcuNzE4N0MyOC4yODkgMTcuNzE4NyAyNy43NTUyIDE3LjkxNTUgMjcuMzQyNiAxOC4yNTQ2QzI3LjE5MzkgMTguMzc2NyAyNy4wMDAzIDE4LjQ0NzQgMjYuNzg4NiAxOC40Mjk5QzI2LjQyMTggMTguMzk5NiAyNi4xMjQ0IDE4LjEwMzMgMjYuMDk2NyAxNy43Mzk0QzI2LjA4MjMgMTcuNTUzNCAyNi4xMzYzIDE3LjM4MDYgMjYuMjM2NCAxNy4yNDI1TDI2LjI1MTggMTcuMjIxN0MyNy4xMTQgMTYuMTI5NiAyOC40Mzk5IDE1LjQ0OCAyOS45NDY4IDE1LjQ0OEMzMi41NDgxIDE1LjQ0OCAzNC42NTY5IDE3LjUzOTUgMzQuNjU2OSAyMC4xMTk0QzM0LjY1NjkgMjAuNjAzMiAzNC41ODI4IDIxLjA2OTggMzQuNDQ1MyAyMS41MDg2QzMzLjk2MTggMjMuMDUwMyAzMi43MDY5IDIzLjg3NDMgMzIuMDU0MiAyNC4yOTg1QzMxLjE3MDYgMjQuODcyNiAzMC4zODUyIDI1LjExODggMzAuMTY3NiAyNS4xODcxTDMwLjE2MjggMjUuMTg4NkMyOC4yMzE0IDI1Ljc5MzcgMjQuNTMgMjcuMTYxMiAxOS42NzczIDI4Ljk4NzRDMjEuMjYxMyAzMi4xMDg5IDI0LjA5NjkgMzUuNDMxOCAyNS43OTg2IDM3LjA5NzhDMjYuOTcyNSAzOC4yNDcgMjguNTE1MSAzOS4wNTkzIDMwLjI5NDYgMzkuMDU5M0MzMS42NDc4IDM5LjA1OTMgMzIuOTAwNSAzOC42MjU1IDMzLjkxMjUgMzcuODg2OEMzNC4xNjA5IDM3LjcwNTggMzQuNDQxMyAzNy41NzA1IDM0Ljc0MjYgMzcuNTA1OEMzNC44MzQ0IDM3LjQ4NjIgMzQuOTI0MSAzNy40NzMgMzQuOTk5MyAzNy40NzNDMzUuOTQ2MSAzNy40NzMgMzYuNzEzMiAzOC4yMzQyIDM2LjcxMzIgMzkuMTcyOEMzNi43MTMyIDM5Ljc4NDQgMzUuODk4NSA0MC42MTk5IDM1Ljg5ODUgNDAuNjE5OUMzNC40NTIxIDQyLjAxOTUgMzIuNDE5OSA0Mi44ODE3IDMwLjI5NDkgNDIuODgxN0MyOC4xNjk5IDQyLjg4MTcgMjYuMjY1OSA0Mi4wMzIzIDI0LjgwMjIgNDAuNzI1MkMyMi4zNDMxIDM4LjUyOTggMjAuMTI1OSAzNi4wNjQxIDE4LjM2NTEgMzMuMjY4NkMxOC4yMTgzIDM0LjQ5MzYgMTcuNzIxOCAzNi44ODQ2IDE3LjcyMTggMzYuODg0NkMxNy41MjEzIDM3LjY3MDEgMTYuODAyOCAzOC4yNDM1IDE1Ljk0ODUgMzguMjQzNUMxNC45Mzg3IDM4LjI0MzUgMTQuMTIwNSAzNy40MzE2IDE0LjEyMDUgMzYuNDMwNUMxNC4xMjA1IDM2LjMxNDEgMTQuMTUyOSAzNi4wODk1IDE0LjE1MjkgMzYuMDg5NUMxNC40MzI2IDM0LjMxOTcgMTQuODUyMyAzMi41OTYzIDE1LjQwNjcgMzAuOTMyOUMxNi41MzE3IDI3LjY0MzUgMTcuMTQxNSAyNC4xMTg1IDE3LjE0MTUgMjAuNDUyMkMxNy4xNDE1IDIwLjIwNzMgMTcuMTM4NyAxOS45NjMgMTcuMTMzMyAxOS43MTkyQzE3LjA5NDQgMTkuMDYxMiAxNy4wODE4IDE4LjM4MTQgMTcuMDgxOCAxNy43MTM3QzE3LjA4MTggMTcuNTEwOCAxNy4wODE0IDE3LjMwNyAxNy4wODA5IDE3LjEwMjRDMTcuMDc3NyAxNS41NDA1IDE3LjA3NDQgMTMuOTQwMiAxNy4yNTc1IDEyLjQ0ODJDMTcuNjg0NCA4Ljk2NzE1IDIwLjA1NDkgNy4xMDk4NyAyMi40ODY3IDcuMTA5ODdDMjUuMDg4IDcuMTA5ODcgMjcuMTk2OCA5LjIwMTM3IDI3LjE5NjggMTEuNzgxM0MyNy4xOTY4IDEzLjA3MyAyNi4zNTU5IDE0LjY4IDI1LjU3OTcgMTUuNjAwNUMyNS40NDQ3IDE1Ljc3MjYgMjUuMjI2MiAxNS44NzMyIDI0Ljk4OTQgMTUuODczMkMyNC41NjM4IDE1Ljg3MzIgMjQuMjE4NiAxNS41MzEyIDI0LjIxODYgMTUuMTA4OFoiIGZpbGw9InVybCgjcGFpbnQwX3JhZGlhbF8yMTYyXzIxNSkiLz4KPGRlZnM+CjxyYWRpYWxHcmFkaWVudCBpZD0icGFpbnQwX3JhZGlhbF8yMTYyXzIxNSIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgyNSAyNSkgcm90YXRlKDkwKSBzY2FsZSgyNSkiPgo8c3RvcCBvZmZzZXQ9IjAuMjMiIHN0b3AtY29sb3I9IiNBQUI1RkYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjODI4REVFIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==" />

       <span  style="position: relative; top: -15px;"> KiddoCare</span>
      </div>
    </div>
  </body>
</html>
